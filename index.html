<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" />
<link rel="stylesheet" type="text/css" href="gh-fork-ribbon.css" />
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<title>IBMULATOR - The IBM PS/1 Emulator</title>
</head>
<body>
<div class="center">
<img src="ibmulator.png" alt="IBMulator"/>
</div>
<h1 id="top">IBMulator - The IBM PS/1 Emulator</h1>
<ul class="menu">
<li><a href="#about">About</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#media">Media</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#usage">Usage</a>
<li><a href="#FAQs">FAQ</a>
<li><a href="#tools">Tools</a></li>
<li><a href="#contact">Contact</a></li>
<li><a href="#disclaimer">Disclaimer</a>
</li>
</ul>
<div style="text-align:center;">Latest version: <a href="https://github.com/barotto/IBMulator/releases/tag/v0.11">v0.11</a></div>

<div>
<a class="github-fork-ribbon" href="https://github.com/barotto/IBMulator" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
</div>

<hr />
<div id="donations">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_donations" />
<input type="hidden" name="business" value="L8BNKML7JYBJA" />
<input type="hidden" name="item_name" value="Donation to the IBMulator project" />
<input type="hidden" name="currency_code" value="EUR" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
</form>
btc: 1HaAurGofqbUs6v7zbr6dhugtYJTJdpQka<br />
btc bech32: bc1qxywvuc08775gwp86c7pgxut4lpqmtjp3pcfgxm<br />
ltc: Le5KQKaqCtA3nhEZhdDLW1hZwjTybz2ww6<br />
<img src="media/ps1_love.png" style="padding: 1em 0 0 0" />
</div>

<a href="#top"><h2 id="about">About</h2></a>

<p>
IBMulator is a free/libre and open source PC emulator focused on the <a href="https://en.wikipedia.org/wiki/IBM_PS/1">IBM PS/1</a> line of computers, 
able to run with the original ROM.
</p>
<p>
The goal is not just to develop yet another emulator, but also to create a faithful <b>simulator</b> with the look and feel of the real machines, hdd and floppy drive noises included.
</p>

<p>
IBMulator can emulate the following systems:
</p>
<ul>
<li>IBM PS/1 model 2011 (80286 @ 10MHz)</li>
<li>IBM PS/1 model 2121 (80386SX @ 16MHz ~ 20MHz)</li>
</ul>

<p>
The program is still in active development so expect bugs and missing features.
</p>

<hr />

<a href="#top"><h2 id="features">Features</h2></a>

<ul>
<li><strong>Works with the original IBM ROM.</strong><br />IBM's peculiar 4-quad GUI and BASIC programming environment included!</li>
<li><strong>PS/1 Audio Card, AdLib, and Sound Blaster 2.0 emulation.</strong><br />The 8-bit DAC and Programmable Sound Generator with 3 voices plus noise of the <a href="https://ps1stuff.wordpress.com/games/">PS/1 Audio Card</a> is properly supported. The emulated <a href="http://www.vgmpf.com/Wiki/index.php?title=Sound_Blaster_2">Sound Blaster</a> sports DSP v2.01 and the famous <a href="http://www.vgmpf.com/Wiki/index.php?title=YM3812">Yamaha YM3812</a> (aka OPL2) chip.</li>
<li><strong>HDD and floppy emulation.</strong><br />You can use standard floppy and HDD images in LBA format. The IBM's HDD 8-bit RLL proprietary interface is also emulated, so no additional IDE roms workarounds are needed.</li>
<li><strong>Sound effects.</strong><br />Emulation of the working noises generated by the floppy drive, the HDD, and the system unit fans.</li>
<li><strong>Realistic timings.</strong><br />The 286 and 386 CPUs, the WDL-330P HDD, and the integrated VGA are as painfully slow as in the original machine, for the truest PS/1 experience. The Prefetch Queue is also emulated, so games like JetFighter work as expected.</li>
<li><strong>OpenGL video output with shaders.</strong><br />The video output can be manipulated with standard GLSL shaders; included is the <a href="https://www.shadertoy.com/view/XsjSzR">CRT shader by Timothy Lottes</a></li>
<li><strong>Audio DSP filters.</strong><br />Audio channels can be filtered with DSP filters like Low Pass and High Pass (and many others), so that the PC-Speaker can be reproduced as it was originally intended, in all its lo-fi glory.</li>
<li><strong>State recording and resuming.</strong></li>
<li><strong>Video capture, screenshots, audio WAV capture, and VGM dumping.</strong><br />When an audio recording is started, raw music data from the PS/1 PSG and the OPL2 chip is also saved in <a href="https://en.wikipedia.org/wiki/VGM_%28file_format%29">VGM format.</a></li>
<li><strong>Full OpenGL GUI.</strong><br />Triple mode of operation: compact (a la DOSBox), normal (w/ the system unit), and realistic (whole system, monitor included!), for an added sense of realism.</li>
<li><strong>Adjustable emulation speed.</strong><br />It can go as slow as 0.01% and as fast as 500% the normal speed (if your PC can handle it, of course). You can watch the VGA scanlines being drawn on the screen, slow down a difficult part of a game, or greatly accelerate an unskippable introduction. Audio speed will be adjusted accordingly but capturing will be unaffected and stutter-free.</li>
<li><strong>Debugging tools.</strong></li>
<li><strong>Multithreaded.</strong><br />The GUI, sound rendering and mixing, video capture, and CPU core emulation are on separate threads, so your multi-core beast has some spare cycles for overclocking that puny 286.</li>
<li><strong>Highly configurable.</strong><br />You can create a dream PS/1 configuration, with 500MB HDD, 16MB RAM and a blazingly fast 386DX @ 33MHz, if you want to.</li>
<li><strong>Multiplatform.</strong><br />Runs in Windows and Linux, 64-bit only though because this is the 21st century.</li>
</ul>

<h3>List of devices currently emulated</h3>
<ul>
<li>Intel 80286 and 80386 (SX & DX), with undefined behaviours, prefetch queue, and instruction timings</li>
<li>IBM PS/1 model 2011, 2121 system boards, with POS and other control registers</li>
<li>Standard PC platform devices: CMOS RTC, 8259 PIC, 8254 PIT, 8237 DMA, 8042 KBD controller</li>
<li>IBM 8-bit RLL and ATA-1 HDD controllers with timings</li>
<li>Intel 82077AA Floppy controller (Mod30 mode) with timings</li>
<li>IBM VGA adapter, with per-scanline emulation</li>
<li>IBM PS/1 Audio Card, AdLib, Sound Blaster 2.01, PC-Speaker (with PWM support)</li>
<li>Game, Serial (COM), and Parallel (LPT) ports</li>
</ul>

<h3>Features likely to be implemented in the not so distant future</h3>
<ul>
<li>Multiple save states.</li>
<li>Sound Blaster Pro & Pro 2 emulation.</li>
<li>More VGA shaders.</li>
<li>MIDI output with redirection to an external sound module (like a real Roland MT-32).</li>
<li>OSD for controlling stuff like audio levels at run time.</li>
<li>Configurable CPU core, in order to disable unneeded emulated features and speed up the program on slower machines.</li>
</ul>

<h3>Features I wish to implement some day, maybe ...</h3>
<ul>
<li>Comprehensive configuration GUI.</li>
<li>Sound Blaster 16 emulation.</li>
<li>Code optimizations and multithreaded CPU core.</li>
<li>Emulation of other PS/1 models, like the 2133 (80486).</li>
<li>NE2000 network card emulation.</li>
<li>3D interface mode with VR support (I need a VR set first...)</li>
</ul>

<hr />

<a href="#media"><h2 id="media">Media</h2></a>
<div class="media">
<div class="images">
<a href="media/01_romshell.png"><img src="media/thumbs/01_romshell.png" title="The 4-Quad GUI aka ROMSHELL" /></a>
<a href="media/02_prgdid.png"><img src="media/thumbs/02_prgdid.png" title="PS/1 System Tutorial" /></a>
<a href="media/03_dosshell.png"><img src="media/thumbs/03_dosshell.png" title="DOS shell" /></a>
<a href="media/04_c.png"><img src="media/thumbs/04_c.png" title="ROMSHELL File manager" /></a>
<a href="media/05_floppysel.png"><img src="media/thumbs/05_floppysel.png" title="Floppy image select dialog" /></a>
<a href="media/06_a.png"><img src="media/thumbs/06_a.png" title="ROMSHELL File manager" /></a>
<a href="media/07_shader.png"><img src="media/thumbs/07_shader.png" title="CRT shader" /></a>
<a href="media/08_configur.png"><img src="media/thumbs/08_configur.png" title="CONFIGUR.EXE" /></a>
<a href="media/09_works.png"><img src="media/thumbs/09_works.png" title="MS Works" /></a>
<a href="media/10_checkit.png"><img src="media/thumbs/10_checkit.png" title="CheckIt benchmark" /></a>
<a href="media/11_prince.png"><img src="media/thumbs/11_prince.png" title="Prince of Persia title screen" /></a>
<a href="media/12_win31.png"><img src="media/thumbs/12_win31.png" title="Windows 3.1" /></a>
<a href="media/13_realistic.jpg"><img src="media/thumbs/13_realistic.png" title="Realistic GUI mode" /></a>
<a href="media/14_debug.png"><img src="media/thumbs/14_debug.png" title="Debugging tools" /></a>
</div>
<div class="videos">
<a href="https://youtu.be/dUTZuc2F9kU" target="_blank"><img src="media/thumbs/video_03_bards3.png" title="System boot and The Bard's Tale 3 intro with the PS/1 Audio Card in Realistic GUI mode" /></a></li>
<a href="https://youtu.be/jLwYFnGgHcI" target="_blank"><img src="media/thumbs/video_01_prince.png" title="Prince of Persia with the PS/1 Audio Card in Normal GUI mode" /></a></li>
<a href="https://youtu.be/YYEGxTyAsfM" target="_blank"><img src="media/thumbs/video_02_system_beeps.png" title="PC-Speaker music with DSP filters in Normal GUI mode" /></a></li>

</div>
</div>


<div class="contentBlock"></div>



<hr />

<a href="#top"><h2 id="download">Download</h2></a>
<p>
<a href="https://github.com/barotto/IBMulator/releases/tag/v0.11">Latest version: v0.11</a> (released 12/sep/2020)
<br /><br />
</p>
<p>
If you're feeling brave and want to try bleeding edge code (or if you want to contribute), use the git
repository: <a href="https://github.com/barotto/IBMulator">https://github.com/barotto/IBMulator</a>
</p>
<p>
ROMs and disk images are copyrighted material and must be downloaded elsewhere 
(<a href="https://www.google.com/search?q=ibm+ps%2F1+rom+images">hint</a>).
</p>

<hr />

<a href="#top"><h2 id="usage">Usage</h2></a>
<h3>TL;DR version</h3>
<ol>
<li><a href="https://www.google.com/search?q=ibm+ps%2F1+rom+images">Obtain</a> a ROM set</li>
<li>Launch the program</li>
<li>Edit ibmulator.ini and specify the ROM set name</li>
<li>Relaunch and enjoy</li>
</ol>
<h3>Full version</h3>
<p>
Please see the <a href="https://github.com/barotto/IBMulator/blob/master/README.md">README</a> file included in the package for detailed instructions on how to configure and use the program.
</p>

<h3>Supported ROMs</h3>
<p>
This is the list of supported ROM BIOS versions and the default configurations that IBMulator selects when it loads them.
</p>
<p>
Please note that the P/N and MD5 values refer only to the 64K BIOS code part of the ROM, loaded at offset 0xFF0000. The additional part with the BASIC interpreter and the ROM drive is not taken into consideration. IBMulator uses the computed MD5 value only to select the actual hardware configuration to use for the "auto" values in the ini file. 
</p>
<p>
IBM used the same ROM BIOS for multiple 2011 / 2121 models and the system configurations reported here and selected by IBMulator are just for your convenience. Every aspect of them can be overridden using the ibmulator.ini file.
</p>
<table>
<tr><th rowspan="2">ROM BIOS version</th><th colspan="4" class="vline">Configuration selected by IBMulator</th></tr>
<tr><th class="vline">PS/1 model</th><th>CPU</th><th>RAM</th><th>Storage</th></tr>
<tr>
	<td>
		P/N: 1057756<br />MD5: f605396b48f02c5e81bc9e5e5fb60717<br />Original US model, w/ ROM drive
	</td>
	<td class="vline">
		PS/1 2011-C34
	</td>
	<td>
		80286 @ 10MHz
	</td>
	<td>
		512KB + 512KB
	</td>
	<td>
		3.5" 1.44 FDD<br />30MB 8-bit HDD (type 35)
	</td>
</tr>
<tr>
	<td>
		P/N: 1057760<br />MD5: 9cac91f1fa7fe58d9509b754785f7fd2<br />US and Intl. models, w/ ROM drive
	</td>
	<td class="vline">
		PS/1 2011-C34
	</td>
	<td>
		80286 @ 10MHz
	</td>
	<td>
		512KB + 512KB
	</td>
	<td>
		3.5" 1.44 FDD<br />30MB 8-bit HDD (type 35)
	</td>
</tr>
<tr>
	<td>
		P/N: 92F9674<br />MD5: 159413f190f075b92ffb882331c70eaf<br />US model, w/ ROM drive
	</td>
	<td class="vline">
		PS/1 2121-B82
	</td>
	<td>
		80386SX @ 16MHz
	</td>
	<td>
		2048KB
	</td>
	<td>
		3.5" 1.44 FDD<br />80MB ATA HDD
	</td>
</tr>
<tr>
	<td>
		P/N: 92F9606<br />MD5: 7b5f6e3803ee57fd95047738d36f12fd<br />Intl. models, w/ ROM drive
	</td>
	<td class="vline">
		PS/1 2121-B82
	</td>
	<td>
		80386SX @ 16MHz
	</td>
	<td>
		2048KB
	</td>
	<td>
		3.5" 1.44 FDD<br />80MB ATA HDD
	</td>
</tr>
<tr>
	<td>
		P/N: 93F2455<br />MD5: 01ae622ab197b057c92ad7832f868b4c<br />All models, w/o ROM drive
	</td>
	<td class="vline">
		PS/1 2121-A82
	</td>
	<td>
		80386SX @ 20MHz
	</td>
	<td>
		2048KB
	</td>
	<td>
		3.5" 1.44 FDD<br />80MB ATA HDD
	</td>
</tr>
</table>

<h3>HDD types</h3>
<p>These are the HDD types supported by the PS/1 BIOS.<br />This table was defined by IBM and is common to many of the their products of the same era. While rendered irrelevant with the introduction of the ATA interface in the 2121 model, it's still present in its BIOS and it can be used in IBMulator to quickly specify a geometry and create a pre-formatted disk.</p>
<pre>
Type   Cyl.   Heads    Sect.   Write    Land     Size
                               p-comp   Zone

 0       0      0        0         0       0    (none)
 1     306      4       17       128     305     10MB
 2     615      4       17       300     615     20MB
 3     615      6       17       300     615     31MB
 4     940      8       17       512     940     62MB
 5     940      6       17       512     940     47MB
 6     615      4       17        -1     615     20MB
 7     462      8       17       256     511     31MB
 8     733      5       17        -1     733     30MB
 9     900     15       17        -1     901    112MB
10     820      3       17        -1     820     20MB
11     855      5       17        -1     855     35MB
12     855      7       17        -1     855     50MB
13     306      8       17       128     319     20MB
14     733      7       17        -1     733     43MB
15       0      0        0         0       0    (none)
16     612      4       17         0     663     20MB
17     977      5       17       300     977     41MB
18     977      7       17        -1     977     57MB
19    1024      7       17       512    1023     59MB
20     733      5       17       300     732     30MB
21     733      7       17       300     732     43MB
22     733      5       17       300     733     30MB
23     306      4       17         0     336     10MB
24     612      4       17       305     663     20MB
25     306      4       17        -1     340     10MB
26     612      4       17        -1     670     20MB
27     698      7       17       300     732     41MB
28     976      5       17       488     977     40MB
29     306      4       17         0     340     10MB
30     611      4       17       306     663     20MB
31     732      7       17       300     732     43MB
32    1023      5       17        -1    1023     42MB
33     614      4       25        -1     663     30MB
34     775      2       27        -1     900     20MB
35     921      2       33        -1    1000     30MB
36     402      4       26        -1     460     20MB
37     580      6       26        -1     640     44MB
38     845      2       36        -1    1023     30MB
39     769      3       36        -1    1023     41MB
40     531      4       39        -1     532     40MB
41     577      2       36        -1    1023     20MB
42     654      2       32        -1     674     20MB
43     923      5       36        -1    1023     81MB
44     531      8       39        -1     532     81MB
45                  -- unused --
46                  -- unused --
47             -- user defined type --
</pre>
<p>
<em>Note:</em> "type 47" is an IBMulator only feature, as the original BIOS does not have an interface to define a custom geometry.
</p>
<p>
<em>Note:</em> the biggest formattable HDD you can define (type 47) for model 2011 is 496MiB (CHS 1024/16/62), due to a BIOS bug that limits the sectors per track to 62 instead of 63. The fact that such a bug exists is unsurprising as back then no HDD had 63 physical sectors per track.
</p>


<hr />

<a href="#top"><h2 id="FAQs">FAQ</h2></a>

For the current list of known bugs please see the <a href="https://github.com/barotto/IBMulator/issues">GitHub's issue tracker</a>.

<dl>

<dt>Where am I supposed to put the ROM and what should I write in the ini file?</dt>
<dd>The easiest way is to put the ROM inside the same folder of ibmulator.ini and write its filename in the [system] section. 
If you want to put the ROM somewhere else then write its full path in the ini file.</dd>


<dt>I can't seem to manually navigate to my disk images on the D: drive, from the floppy file explorer. What now?</dt>
<dd>
Unfortunately IBMulator is still incomplete and on Windows the floppy image file dialog can't move from a drive partition letter to another.<br />
You have two options: 
<ol>
<li>put the full path of your disk images directory in the media_dir ini file setting, under the [program] section</li>
<li>use the value "native" in the [program]:file_dialogs ini file setting.</li>
</ol>
As to why IBMulator can't do something so basic as to navigate to a different drive letter, please consider that I'm a Linux developer and on Linux there's no such thing as a "drive letter" ;)
</dd>


<dt>My Windows OS is in Italian/Greek/%other-non-US-language% and IBMulator won't start. What can I do?</dt>
<dd>
The current version of IBMulator won't work if you launch it from a file system path with non-ASCII charachers in it. This is a <a href="https://github.com/barotto/IBMulator/issues/43">known bug</a>. Put the IBMulator package on C:\ or D:\ or wherever you want as long as there are no non-ASCII characters in its full path.
</dd>



<dt>What kind of shaders can I use? What kind of extension? i.e. are .glsl and .fx supported?</dt>
<dd>
You can use one of the shaders available in the share/ibmulator/gui/shaders directory. At the moment there are only 2 possible options:

<ul>
<li>use the default shaders (the ones initially set in the ini file), which do simple image scaling;
<li>use the fb-scanlines.fs fragment shader, which is the CRT styled scan-line shader by Timothy Lottes.
</ul>

The scaling quality is also determined by the *_filter options. So suppose you want to use the scanline shader:
<pre>normal_shader=gui/shaders/fb-scanlines.fs</pre>
This will apply the scanline shader for the normal and compact GUI modes only.
<br />
If you are an expert GLSL programmer you can create one youself starting from the default shaders. Shaders from other emulators are not directly usable but could, at least in theory, be adapted.
</dd>


<dt>In order to play Monkey Island, do I have to create an .img file with all the files of the game?</dt>
<dd>
IBMulator is not simply an emulator (like DOSBox is), it's also a simulator, so it operates using disk images, for both the HDD and floppy disks.

In order to play a game:
<ol>
<li>prepare an HDD image: download a premade one or create a new one. If you decide for the latter, IBMulator will create an empty new disk image for you; you'll have to then install DOS using the DOS install floppy images or you can restore the original IBM software from a restore floppy disk set.
<li>install the game you want to play from its floppy images into the HDD. You can also copy a game's files directly on the HDD's .img using special software capable of manipulating image files: on Linux this is relatively easy, look at the "HDD image" section of the <a href="https://github.com/barotto/IBMulator/blob/master/README.md">README</a>.
</ol>
Using floppy images can (and should) be done through the GUI: click on the floppy drive and a selection window will appear, pointing to the media directory where the floppy images should be located (the default media directory can be set in the ini file under the [program] section).
So at the end of the day, using IBMulator is like using a real IBM PS/1 computer. Sometimes it's incovenient, just like the real thing!
</dd>


<dt>I use the 2121 BIOS but the 4-quad GUI doesn't show up like in the 2011 model. Instead, a "Non system-disk or disk error. Press Enter" message appears after memory test. What do I have to do?</dt>
<dd>
The PS/1 2011 has a so-called romdrive in the ROM image, with PC-DOS and the 4-quad software in it. The 2121 has 2 versions of the ROM, one with the romdrive and one without. You need to use the 386/16 version of the ROM which has the romdrive built in, or, if you want to use the 386/20 version, you need a HDD image with the IBM's original PS/1 software installed.
</dd>


<dt>There are already plenty of emulators. Why another one?</dt>
<dd>
Why not? Most of the time a FOSS project starts by scratching a developer's personal itch. I had several itches, like: 

<ol>
<li>At the time (early 2014), nobody was interested in emulating the PS/1 and its audio card.</li>
<li>I was looking for a new free time software project.</li>
<li>I wanted to learn something new (C++11, multithreading, x86 assembly, PC architecture.)</li>
<li>I always wanted to write an emulator.</li>
</ol>

</dd>


<dt>Why didn't you contribute to MESS / PCem / %EmulatorName% instead?</dt>
<dd>
I did think about it, but ended up voting against. Working in an existing environment has its own rather steep learning curve and I'm not an emulation and/or PC architecture expert, nor a C/C++ professional. Actually, because of my lack of experience, I end up incorporating lots of code from other license-compatible projects (open source be praised).
</dd>


<dt>Why the IBM PS/1, an overpriced, slow PC compatible that was already absolete at launch?</dt>
<dd>
Nostalgia. The PS/1 has been my very first PC when I was a child, so I wanted to make it immortal before the machine I still have dies of old age.<br />
Also I think that it has some dinstinctive features that make it interesting an unique, like the 4-Quad ROM SHELL interface.
</dd>


<dt>Can I contribute?</dt>
<dd>
Sure! See below for contact information.
</dd>


<dt>Can I reuse your code for %EmulatorName%?</dt>
<dd>
Yes, as long as you abide by the GPL's terms and conditions. Also, feel free to contact me for information about the PS/1 and its inner workings.
</dd>

</dl>


<hr />

<a href="#top"><h2 id="tools">Tools</h2></a>
<p>
I've created some tools to aid the development of IBMulator. Maybe you'll find them useful too.
</p>
<h3>test386.asm</h3>
<p>
CPU tester for emulators, written in NASM assembly. It runs as a BIOS replacement and does not depend on any OS or external library.
</p>
<p><a href="https://github.com/barotto/test386.asm">GitHub's repository</a></p>

<h3>VGATEST</h3>
<p>
Protected mode DOS program used to test VGA functionality in both text and graphics modes. It gives the ability to test all the standard BIOS modes plus many non standard modes like Mode X or Mode Y.
</p>
<p><a href="https://github.com/barotto/VGATEST">GitHub's repository</a></p>

<hr />

<a href="#top"><h2 id="contact">Contact</h2></a>
<p>
For bugs and feature requests, please use the
<a href="https://github.com/barotto/IBMulator/issues">
GitHub tracker</a>.
</p>

<hr />

<a href="#top"><h2 id="disclaimer">Disclaimer</h2></a>
<p>
IBMulator is not a product of IBM Corporation nor is it sponsored by IBM Corporation in any way.
<br />
All trademarks and registered trademarks are the property of their respective owners.
</p>

<p style="text-align: center; margin-top: 2cm;">
<img src="c.gif" />
</p>
</body>
</html>

